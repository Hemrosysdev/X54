/*
 * YakinduFreeRtosTimer.cpp
 *
 *  Created on: 28.10.2019
 *      Author: gesser
 */

/*!************************************************************************************************************************************************************
 *
 *************************************************************************************************************************************************************/

#include "YakinduFreeRtosTimer.h"
#include "SystemStateCtrlQueue.h"

/*!************************************************************************************************************************************************************
 *
 *************************************************************************************************************************************************************/

YakinduFreeRtosTimer::YakinduFreeRtosTimer( SystemStateCtrlQueue * pQueue,
                                            const sc_eventid       event )
    : FreeRtosTimer( "YakinduFreeRtosTimer" )
    , m_pQueue( pQueue )
    , m_event( event )
{
}

/*!************************************************************************************************************************************************************
 *
 *************************************************************************************************************************************************************/

YakinduFreeRtosTimer::~YakinduFreeRtosTimer()
{
}

/*!************************************************************************************************************************************************************
 *
 *************************************************************************************************************************************************************/

void YakinduFreeRtosTimer::processTimeout( void )
{
    if ( m_pQueue )
    {
        BaseType_t xReturn = m_pQueue->sendStateMachineTimerEvent( m_event );

        if ( xReturn != pdPASS )
        {
            vlogError( "processTimeout: can't send message state machine timer event %x into queue (%d)", m_event, xReturn );
        }
    }
}

/*!************************************************************************************************************************************************************
 *
 *************************************************************************************************************************************************************/
